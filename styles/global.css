/* =================================================================
   CDO 全局样式重写 (Final Version)
   包含了：字体优化、暗黑模式适配、以及你的定制化 UI 需求
   ================================================================= */

:root {
  --fg-color: #37352f;
  --fg-color-0: rgba(55, 53, 47, 0.09);
  --fg-color-1: rgba(55, 53, 47, 0.16);
  --fg-color-2: rgba(55, 53, 47, 0.6);
  --fg-color-3: rgba(55, 53, 47, 0.8);
  --fg-color-4: #000;
  --bg-color: #fff;
  --bg-color-0: rgba(135, 131, 120, 0.15);
  --bg-color-1: #f7f6f3;
  --bg-color-2: rgba(135, 131, 120, 0.15);
  --notion-red: #e03e3e;
  --notion-pink: #ad1a72;
  --notion-blue: #0b6e99;
  --notion-purple: #6940a5;
  --notion-teal: #4d6461;
  --notion-yellow: #dfab01;
  --notion-orange: #d9730d;
  --notion-brown: #64473a;
  --notion-gray: #9b9a97;
  
  /* 覆盖 Notion 默认间距变量 */
  --notion-gap: 16px !important;
}

[data-theme='dark'] {
  --fg-color: rgba(255, 255, 255, 0.9);
  --fg-color-0: rgba(255, 255, 255, 0.13);
  --fg-color-1: rgba(255, 255, 255, 0.2);
  --fg-color-2: rgba(255, 255, 255, 0.6);
  --fg-color-3: rgba(255, 255, 255, 0.8);
  --fg-color-4: #fff;
  --bg-color: #2f3437;
  --bg-color-0: rgba(255, 255, 255, 0.1);
  --bg-color-1: #3f4447;
  --bg-color-2: rgba(255, 255, 255, 0.1);
  --notion-red: #ff7369;
  --notion-pink: #e255a1;
  --notion-blue: #529cca;
  --notion-purple: #9a6dd7;
  --notion-teal: #4dab9a;
  --notion-yellow: #ffdc49;
  --notion-orange: #ffa344;
  --notion-brown: #937264;
  --notion-gray: #979a9b;
}

/* =========================================================
   1. 核心修复：顶部大图 & 内容图片 (Hero / Block Image)
   目标：完全去掉圆角、去掉投影，实现“扁平大图”效果
   ========================================================= */

/* 针对 Notion 内容里的 Image Block */
body .notion-block-image {
  border-radius: 0 !important;
  box-shadow: none !important;
  margin-top: 0 !important; /* 消除顶部多余间距，让图片顶上去 */
  margin-bottom: 2rem !important;
}

/* ⚠️ 关键：Next.js Image 会套一层 span，必须穿透它 */
body .notion-block-image img,
body .notion-block-image > span {
  border-radius: 0 !important; /* 强制变直角 */
  box-shadow: none !important;
  max-height: 60vh !important; /* 限制最大高度，防止霸屏 */
  object-fit: cover !important;
}

/* 针对 Notion Page Cover (防止你用的是封面图) */
body .notion-page-cover-wrapper,
body .notion-page-cover,
body .notion-page-cover span,
body .notion-page-cover img {
    border-radius: 0 !important;
    box-shadow: none !important;
    min-height: 30vh !important;
}


/* =========================================================
   2. 核心修复：数据库卡片 (Gallery View)
   目标：小间距、去投影、细边框、小圆角
   ========================================================= */

/* 修复间距变大的问题 */
body .notion-gallery-grid {
  grid-gap: 16px !important;  /* 强制紧凑间距 */
  gap: 16px !important;
  border-top: none !important;
  padding-top: 4px !important;
}

/* 卡片本体样式 */
body .notion-gallery-card {
  /* 去掉原本的大投影 */
  box-shadow: none !important;
  
  /* 改为小圆角 (4px) */
  border-radius: 4px !important;
  
  /* 加一根极细的边框，提升精致感 */
  border: 1px solid var(--fg-color-1) !important;
  
  /* 背景透明，更通透 */
  background: transparent !important;
  
  transition: all 0.2s ease !important;
}

/* 鼠标悬停交互 */
body .notion-gallery-card:hover {
  /* 悬停时微微变灰，而不是加投影 */
  background: var(--bg-color-0) !important;
  transform: translateY(-2px) !important;
}

/* 卡片封面图圆角修正 */
body .notion-gallery-card .notion-page-cover-wrapper {
  border-top-left-radius: 3px !important;
  border-top-right-radius: 3px !important;
  border-bottom: none !important;
}

/* 卡片文字区域紧凑化 */
body .notion-gallery-card .notion-collection-card-body {
    padding: 12px 10px !important;
}

/* 隐藏卡片里的日期/属性图标 (可选，会让卡片更干净) */
body .notion-gallery-card .notion-property-icon {
    display: none !important;
}
