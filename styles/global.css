/* =================================================================
   CDO 终极全能版 (修复布局+去投影+按钮复位)
   ================================================================= */

:root {
  --notion-corner-radius: 4px !important;
  
  /* 颜色变量 */
  --fg-color: #37352f;
  --fg-color-0: rgba(55, 53, 47, 0.09);
  --fg-color-1: rgba(55, 53, 47, 0.16);
  --fg-color-2: rgba(55, 53, 47, 0.6);
  --fg-color-3: rgba(55, 53, 47, 0.8);
  --bg-color: #fff;
  --bg-color-0: rgba(135, 131, 120, 0.15);
  --notion-red: #e03e3e;
  --notion-blue: #0b6e99;
  
  /* 间距变量 */
  --notion-gap: 16px;
}

[data-theme='dark'] {
  --fg-color: rgba(255, 255, 255, 0.9);
  --fg-color-1: rgba(255, 255, 255, 0.2);
  --fg-color-2: rgba(255, 255, 255, 0.6);
  --bg-color: #2f3437;
}

/* =========================================================
   1. 基础布局修复 (消除顶部和左右空白)
   ========================================================= */
body {
    margin: 0 !important;
    padding: 0 !important;
    overflow-x: hidden; /* 防止横向滚动条 */
}

.notion-frame {
    padding: 0 !important; /* 消除 Notion 内部的默认边距 */
}

/* =========================================================
   2. 亮暗模式按钮复位 (Position Fix)
   ========================================================= */
.custom-header-buttons {
    position: absolute !important;
    top: 16px;       /* 距离顶部 16px */
    right: 20px;     /* 距离右边 20px */
    z-index: 1000;   /* 确保在最上层 */
    display: flex;
    align-items: center;
}

.toggle-dark-mode {
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.toggle-dark-mode:hover {
    background: var(--bg-color-0);
}

/* =========================================================
   3. 数据库卡片投影彻底清除 (Shadow Kill)
   ========================================================= */
body .notion-gallery-card {
    /* 暴力清除所有相关的投影变量 */
    --notion-card-shadow: none !important;
    box-shadow: none !important; 
    
    border-radius: 4px !important;
    border: 1px solid var(--fg-color-1) !important;
    background: transparent !important;
    transition: background 0.2s ease, transform 0.2s ease !important;
}

body .notion-gallery-card:hover {
    background: rgba(55, 53, 47, 0.03) !important;
    border-color: rgba(55, 53, 47, 0.3) !important;
    transform: translateY(-2px) !important;
    box-shadow: none !important;
}

[data-theme='dark'] body .notion-gallery-card:hover {
    background: rgba(255, 255, 255, 0.04) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
}

/* =========================================================
   4. 目录样式 & 其他图片修复
   ========================================================= */
body .notion-aside-table-of-contents-header { display: none !important; }
body .notion-aside-table-of-contents { margin-top: 8px !important; padding-left: 0 !important; }
body .notion-table-of-contents-item { list-style: none !important; padding: 2px 0 !important; }
body .notion-table-of-contents-item a { text-decoration: none !important; color: var(--fg-color-3) !important; transition: color 0.2s ease; }
body .notion-table-of-contents-item a:hover { color: var(--notion-blue) !important; }
body .notion-page-cover-wrapper, body .notion-page-cover, body .notion-block-image img { box-shadow: none !important; }
