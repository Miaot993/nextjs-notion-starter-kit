/* =================================================================
   CDO ç»ˆææ ·å¼ V7.0ï¼šMedium é«˜çº§æ„Ÿé…è‰² + æš—é»‘æ¨¡å¼å®Œç¾ä¿®å¤ + å…¨ç»“æ„ä¼˜åŒ–
   ================================================================= */

:root {
    /* ğŸ“ å…¨å±€åœ†è§’è®¾ç½® */
    --notion-corner-radius: 4px !important;

    /* ğŸ“ Medium é£æ ¼åŸºç¡€è‰²æ¿ (äº®è‰²æ¨¡å¼é»˜è®¤) */
    --medium-title: #292929;
    /* æŸ”å’Œçš„ç‚­é»‘ï¼Œä¸åˆºçœ¼ */
    --medium-text: #757575;
    /* ç»å…¸çš„é˜…è¯»ç° */
    --medium-meta: rgba(117, 117, 117, 0.6);
    --medium-border: rgba(0, 0, 0, 0.08);
    /* æç»†åˆ†å‰²çº¿ */

    /* ğŸŒ™ æš—é»‘æ¨¡å¼å…¨å±€èƒŒæ™¯è‰² (åŠ å¼ºç‰ˆ) */
    [data-theme='dark'],
    body.dark-mode {
        /* 1. è®¾ç½®å˜é‡ (Medium é£æ ¼æ¨èæ·±ç‚­ç°) */
        --bg-color: #191919 !important;
        --fg-color: rgba(255, 255, 255, 0.9) !important;

        /* 2. âš¡ï¸ æ ¸å¿ƒï¼šå¼ºåˆ¶æŠŠé¢œè‰²åˆ·åˆ°æ‰€æœ‰å¯èƒ½çš„å®¹å™¨ä¸Š */
        background-color: #191919 !important;
    }

    /* 3. è¡¥åˆ€ï¼šé˜²æ­¢ notion-app å®¹å™¨ä¸å¬è¯ */
    body.dark-mode .notion-app,
    body.dark-mode .notion-frame,
    body.dark-mode .notion {
        background-color: #191919 !important;
    }
}

/* 0. åŸºç¡€é‡ç½® */
body {
    margin: 0 !important;
    padding: 0 !important;
    overflow-x: hidden;
}

.notion-frame {
    padding: 0 !important;
}


/* =========================================================
   1. é¡¶éƒ¨å¤§å›¾ (Page Cover) - ç©¿é€åœ†è§’ä¿®å¤
   ========================================================= */
.notion-page-cover-wrapper {
    border-radius: 8px !important;
    overflow: hidden !important;
    z-index: 1 !important;
}

.notion-page-cover-wrapper>span {
    border-radius: 8px !important;
    overflow: hidden !important;
}

.notion-page-cover-wrapper img,
img.notion-page-cover {
    border-radius: 8px !important;
}


/* =========================================================
   2. é¢åŒ…å±‘å¯¼èˆª (Breadcrumbs) - Flex é˜²æ¢è¡Œç‰ˆ
   ========================================================= */
.breadcrumbs-limit {
    display: flex !important;
    align-items: center !important;
    overflow: hidden !important;
}

.breadcrumbs-limit .breadcrumb {
    display: flex !important;
    align-items: center !important;
    max-width: 200px !important;
    /* ç”µè„‘ç«¯å®½åº¦é™åˆ¶ */
    padding: 6px 6px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
}

.breadcrumbs-limit .breadcrumb .notion-page-icon-inline {
    flex-shrink: 0 !important;
    margin-right: 4px !important;
    display: flex !important;
    align-items: center !important;
}

.breadcrumbs-limit .breadcrumb .title {
    flex: 1 !important;
    min-width: 0 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* ğŸ“± é¢åŒ…å±‘æ‰‹æœºé€‚é… */
@media (max-width: 768px) {
    .breadcrumbs-limit .breadcrumb {
        max-width: 150px !important;
    }
}


/* =========================================================
   3. äº®æš—åˆ‡æ¢æŒ‰é’® (Medium é£æ ¼å¾®è°ƒ)
   ========================================================= */
.custom-header-buttons {
    position: fixed !important;
    top: 10px;
    /* ç¨å¾®å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œå‘¼å¸æ„Ÿæ›´å¥½ */
    right: 10px;
    z-index: 9999 !important;
    display: flex;
    align-items: center;
    justify-content: center;
}

.toggle-dark-mode {
    display: flex !important;
    align-items: center;
    justify-content: center;
    width: 36px !important;
    /* ç¨å¾®è°ƒå°ä¸€ç‚¹ï¼Œæ›´ç²¾è‡´ */
    height: 36px !important;
    font-size: 18px !important;
    border-radius: 50% !important;
    padding: 0 !important;
    cursor: pointer;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent !important;
    outline: none !important;
    user-select: none;

    /* é»˜è®¤é¢œè‰² */
    color: var(--medium-title) !important;
    background: transparent !important;
}

@media (hover: hover) {
    .toggle-dark-mode:hover {
        background: rgba(0, 0, 0, 0.05) !important;
        transform: scale(1.05);
    }
}

.toggle-dark-mode:active {
    transform: scale(0.9);
    background: transparent !important;
}

/* ğŸŒ™ æŒ‰é’®æš—é»‘æ¨¡å¼é€‚é… */
body.dark-mode .toggle-dark-mode {
    color: rgba(255, 255, 255, 0.9) !important;
}

@media (hover: hover) {
    body.dark-mode .toggle-dark-mode:hover {
        background: rgba(255, 255, 255, 0.15) !important;
    }
}


/* =========================================================
   4. æ»šåŠ¨æ¡ç¾åŒ– (éšå½¢æç®€)
   ========================================================= */
::-webkit-scrollbar {
    width: 5px;
    height: 5px;
}

/* æ›´ç»† */
::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
}

[data-theme='dark'] ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.4);
}


/* =========================================================
   5. åšå®¢åˆ—è¡¨ (Medium é£æ ¼æ ¸å¿ƒé‡æ„)
   ========================================================= */

/* --- 5.1 åˆ—è¡¨å®¹å™¨ --- */
body .notion-gallery-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
    border-top: none !important;
    padding-top: 20px !important;
    max-width: 100% !important;
    margin: 0 auto !important;
}

/* --- 5.2 å•ä¸ªå¡ç‰‡ (Link) --- */
body .notion-gallery-grid a {
    display: flex !important;
    flex-direction: row-reverse !important;
    /* å›¾å³æ–‡å·¦ */
    align-items: flex-start !important;
    justify-content: space-between !important;

    width: 100% !important;
    height: auto !important;
    min-height: 140px !important;

    box-shadow: none !important;
    border: none !important;
    /* ğŸ‘‡ äº®è‰²æ¨¡å¼åˆ†å‰²çº¿ */
    border-bottom: 1px solid var(--medium-border) !important;
    border-radius: 0 !important;
    background: transparent !important;

    padding: 28px 0 !important;
    /* å¢åŠ é—´è·ï¼Œæå‡å‘¼å¸æ„Ÿ */
    text-decoration: none !important;
    transition: opacity 0.2s ease;
}

/* é¼ æ ‡æ‚¬åœå¾®äº¤äº’ */
body .notion-gallery-grid a:hover {
    opacity: 0.85;
}


/* --- 5.3 æ ‡é¢˜ (Title) - é™åˆ¶ 2 è¡Œ --- */
body .notion-gallery-grid .notion-property-title {
    font-size: 0.8rem !important;
    /* ç¨å¾®åŠ å¤§ä¸€ç‚¹ï¼Œå¢åŠ æƒé‡ */
    font-weight: 700 !important;
    line-height: 1.35 !important;
    /* å¢åŠ è¡Œé«˜ï¼Œé˜…è¯»æ›´èˆ’é€‚ */
    margin-bottom: 8px !important;

    /* ğŸ‘‡ äº®è‰²æ¨¡å¼æ–‡å­—é¢œè‰² */
    color: var(--medium-title) !important;

    display: block !important;
}

/* æ ‡é¢˜å†…éƒ¨æ–‡å­—æˆªæ–­ */
body .notion-gallery-grid .notion-property-title .notion-page-title-text {
    white-space: normal !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden !important;
}


/* --- 5.4 æ‘˜è¦ (Description) - é™åˆ¶ 2 è¡Œ --- */
body .notion-gallery-grid .notion-property-text {
    font-size: 0.95rem !important;

    /* ğŸ‘‡ äº®è‰²æ¨¡å¼æ‘˜è¦é¢œè‰² */
    color: var(--medium-text) !important;

    line-height: 1.6 !important;
    /* Medium æ ‡å¿—æ€§çš„å¤§è¡Œé«˜ */
    margin-bottom: 12px !important;

    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    white-space: normal !important;
}


/* --- 5.5 æ—¥æœŸä¸ä½œè€… (Meta) --- */
body .notion-gallery-grid .notion-property-date,
body .notion-gallery-grid .notion-property-person {
    font-size: 0.85rem !important;
    color: var(--medium-meta) !important;
    margin-top: auto !important;
}


/* --- 5.6 å³ä¾§å›¾ç‰‡å®¹å™¨ --- */
body .notion-gallery-grid a>div:first-child {
    width: 200px !important;
    /* ä¿æŒä½ çš„è®¾ç½® */
    height: 134px !important;
    flex-shrink: 0 !important;
    margin-left: 40px !important;
    /* åŠ å¤§å›¾æ–‡é—´è·ï¼Œæ›´æ˜¾é«˜çº§ */
    margin-bottom: 0 !important;

    border-radius: 8px !important;
    box-shadow: none !important;
    overflow: hidden !important;
    position: relative !important;
    background: rgba(0, 0, 0, 0.03) !important;
    /* å›¾ç‰‡åŠ è½½å‰çš„å ä½è‰² */
    z-index: 1 !important;
}

/* å›¾ç‰‡é“ºæ»¡ */
body .notion-gallery-grid a>div:first-child img,
body .notion-gallery-grid a>div:first-child span {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    border-radius: 8px !important;
}

/* =========================================================
   6. ğŸŒŸ å³ä¾§æ‚¬æµ®ç›®å½• (Table of Contents) - V10.1 ä¿®å¤é—´è·å¤±æ•ˆç‰ˆ
   ========================================================= */

/* 1. éšè—å¤šä½™æ ‡é¢˜ */
body .notion-aside-table-of-contents-header {
    display: none !important;
}

/* 2. âš¡ï¸ çˆ¶å®¹å™¨ç•™ç™½ (ä¿æŒä¸å˜) */
body .notion-aside {
    padding-left: 60px !important;
    flex-shrink: 0 !important;
}

/* 3. ç›®å½•å®¹å™¨ */
body .notion-aside-table-of-contents {
    position: sticky !important;
    top: 80px !important;
    width: 240px !important;
    max-width: 240px !important;
    max-height: calc(100vh - 150px) !important;
    overflow-y: auto !important;

    /* ä½ç½® */
    margin: 0 !important;
    margin-left: auto !important;
    margin-right: 100px !important;
    margin-top: 4px !important;

    /* å†…éƒ¨ */
    padding: 0 !important;

    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    z-index: 10 !important;
    scrollbar-width: none;
}

body .notion-aside-table-of-contents::-webkit-scrollbar {
    display: none;
}


/* 4. âš¡ï¸âš¡ï¸ æ ¸å¿ƒä¿®å¤ï¼šé€‰æ‹©å™¨æ”¹å¯¹äº†ï¼ç°åœ¨æ˜¯ç›´æ¥æ§åˆ¶ Link æœ¬èº« */
/* ä»¥å‰æ˜¯ .notion-table-of-contents-item a (é”™çš„)ï¼Œç°åœ¨æ”¹ä¸º a.notion-table-of-contents-item (å¯¹çš„) */
body a.notion-table-of-contents-item {
    display: flex !important;
    align-items: center !important;
    text-decoration: none !important;

    font-size: 14px !important;
    /* å­—ä½“ç¨å¾®åŠ å¤§ä¸€ç‚¹ç‚¹ */
    color: var(--medium-text) !important;

    /* ğŸ‘‡ğŸ‘‡ğŸ‘‡ è¿™é‡Œæ§åˆ¶é—´è·ï¼Œç°åœ¨ç»å¯¹ä¼šç”Ÿæ•ˆäº†ï¼ ğŸ‘‡ğŸ‘‡ğŸ‘‡ */
    padding: 8px 12px !important;
    /* ä¸Šä¸‹ç•™ç™½ï¼ŒæŠŠæ¯ä¸€è¡Œæ’‘é«˜ */
    margin-bottom: 4px !important;
    /* æ¯ä¸€è¡Œä¹‹é—´å†åŠ ä¸€ç‚¹ç‰©ç†ç¼éš™ */
    line-height: 1.2 !important;

    transition: all 0.2s ease;
    overflow: hidden !important;
}


/* 5. æ–‡å­—æˆªæ–­ */
body .notion-table-of-contents-item-body {
    display: block !important;
    width: 100% !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    border-bottom: none !important;
}


/* 6. é¼ æ ‡æ‚¬åœ */
body a.notion-table-of-contents-item:hover {
    color: var(--medium-title) !important;
    /* ğŸ‘‡ğŸ‘‡ğŸ‘‡ æ–°å¢ï¼šå¼ºåˆ¶å»æ‰æ‚¬åœæ—¶çš„ç°è‰²èƒŒæ™¯ ğŸ‘‡ğŸ‘‡ğŸ‘‡ */
    background: transparent !important;
}

body a.notion-table-of-contents-item:hover .notion-table-of-contents-item-body {
    color: var(--medium-title) !important;
}


/* 7. å½“å‰é«˜äº® (Active) - æç®€æ‚å¿—é£ */
body .notion-table-of-contents-active-item {
    color: var(--medium-title) !important;
    /* æ·±é»‘ */
    font-weight: 700 !important;
    /* åŠ ç²— */
    opacity: 1 !important;

    /* âŒ å½»åº•å»é™¤æ‰€æœ‰çº¿æ¡å’ŒèƒŒæ™¯ */
    margin-left: 0 !important;
    border: none !important;
    border-left: none !important;
    padding-left: 0 !important;
    background: transparent !important;
}

/* ğŸŒ™ æš—é»‘æ¨¡å¼é€‚é… */
body.dark-mode .notion-aside-table-of-contents {
    background: transparent !important;
}

body.dark-mode a.notion-table-of-contents-item {
    color: rgba(255, 255, 255, 0.5) !important;
}

body.dark-mode a.notion-table-of-contents-item:hover .notion-table-of-contents-item-body,
body.dark-mode .notion-table-of-contents-active-item {
    color: #fff !important;
}

body.dark-mode .notion-table-of-contents-active-item {
    border: none !important;
}

/* ğŸ“± çª„å±è‡ªåŠ¨éšè— */
@media (max-width: 1200px) {
    body .notion-aside-table-of-contents {
        display: none !important;
    }

    body .notion-aside {
        display: none !important;
    }
}

/* =========================================================
   7. ğŸ  é¦–é¡µç‰¹æ®Šå¤„ç† (Home Page) - è‡ªåŠ¨éšè—ç›®å½•
   ========================================================= */

/* é€»è¾‘ï¼šå¦‚æœé¡µé¢åŒ…å« "åšå®¢åˆ—è¡¨ç½‘æ ¼(.notion-gallery-grid)"ï¼Œè¯´æ˜æ˜¯é¦–é¡µ */

/* 1. éšè—é¦–é¡µçš„ç›®å½•ç»„ä»¶ */
body:has(.notion-gallery-grid) .notion-aside-table-of-contents {
    display: none !important;
}

/* 2. éšè—é¦–é¡µçš„ä¾§è¾¹æ å®¹å™¨ (è¿åŒç•™ç™½ä¸€èµ·å»æ‰) */
/* è¿™æ ·é¦–é¡µçš„å†…å®¹å°±èƒ½è‡ªåŠ¨å±…ä¸­æˆ–å æ»¡ï¼Œä¸ä¼šè¢«å³ä¾§ç©ºç™½æŒ¤å‹ */
body:has(.notion-gallery-grid) .notion-aside {
    display: none !important;
    padding-left: 0 !important;
    width: 0 !important;
}


/* =========================================================
   --- æ‚é¡¹éšè— ---
   ========================================================= */
body .notion-property-icon {
    display: none !important;
}

body .notion-aside-table-of-contents-header {
    display: none !important;
}

body .notion-aside-table-of-contents {
    margin-top: 8px !important;
    padding-left: 0 !important;
}

body .notion-table-of-contents-item {
    list-style: none !important;
    padding: 2px 0 !important;
}

body .notion-table-of-contents-item a {
    text-decoration: none !important;
    color: var(--fg-color-1) !important;
}

body .notion-page-cover-wrapper,
body .notion-page-cover,
body .notion-block-image img {
    box-shadow: none !important;
}


/* =========================================================
   ğŸŒ™ æ ¸å¿ƒï¼šæš—é»‘æ¨¡å¼ä¸“ç”¨ä¿®å¤ (Dark Mode Fixes)
   ========================================================= */

/* 1. æ ‡é¢˜å˜ç™½ (å¸¦ä¸€ç‚¹ç‚¹æŸ”å’Œ) */
body.dark-mode .notion-gallery-grid .notion-property-title {
    color: rgba(255, 255, 255, 0.9) !important;
}

/* 2. æ‘˜è¦å˜é“¶ç° */
body.dark-mode .notion-gallery-grid .notion-property-text {
    color: rgba(255, 255, 255, 0.65) !important;
}

/* 3. æ—¥æœŸå˜æš—ç° */
body.dark-mode .notion-gallery-grid .notion-property-date,
body.dark-mode .notion-gallery-grid .notion-property-person {
    color: rgba(255, 255, 255, 0.4) !important;
}

/* 4. åˆ†å‰²çº¿å˜å¾®å¼±çš„ç™½å…‰ */
body.dark-mode .notion-gallery-grid a {
    border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
}

/* 5. å›¾ç‰‡å ä½è‰²å˜æ·± */
body.dark-mode .notion-gallery-grid a>div:first-child {
    background: rgba(255, 255, 255, 0.05) !important;
}


/* =========================================================
   ğŸ“± æ‰‹æœºç«¯é€‚é… (Mobile) - V7.1 ç²¾å‡†ç•™ç™½ç‰ˆ
   ========================================================= */
@media (max-width: 768px) {

    /* 0. é¡¶éƒ¨å¤§å›¾å¼ºåˆ¶å˜ç›´è§’ (æ‰‹æœºç«¯ç‰¹æœ‰) */
    .notion-page-cover-wrapper,
    .notion-page-cover-wrapper>span,
    .notion-page-cover-wrapper img,
    img.notion-page-cover {
        border-radius: 0px !important;
        /* âš¡ï¸ æ‰‹æœºç«¯å¼ºåˆ¶ 0px */
    }

    /* 1. å¤åŸæ¡†æ¶ï¼šè®© Breadcrumbs å’Œ Cover èƒ½ç¢°åˆ°å±å¹•è¾¹ç¼˜ */
    body .notion-frame {
        padding: 0 !important;
        /* ğŸ‘ˆ å…³é”®ï¼šå¤–å±‚ä¸åŠ  padding */
    }

    /* 2. âš¡ï¸ æ ¸å¿ƒï¼šåªç»™â€œæ­£æ–‡ä¸»ä½“â€åŠ å‘¼å¸æ„Ÿ */
    /* è¿™é‡Œçš„ main.notion-page åŒ…è£¹äº†æ ‡é¢˜ã€æ­£æ–‡å’Œåšå®¢åˆ—è¡¨ï¼Œä½†åœ¨å°é¢å›¾ä¸‹æ–¹ */
    body main.notion-page {
        padding-left: 16px !important;
        padding-right: 16px !important;
        box-sizing: border-box !important;
        width: 100% !important;
    }

    /* 3. åšå®¢åˆ—è¡¨å¸ƒå±€è°ƒæ•´ */
    body .notion-gallery-grid a {
        flex-direction: column-reverse !important;
    }

    /* 4. åˆ—è¡¨å›¾ç‰‡ï¼šå› ä¸ºå¤–å±‚ main åŠ äº† 16pxï¼Œå›¾ç‰‡ä¼šè‡ªåŠ¨ç¼©è¿›ï¼Œ
       å¦‚æœä½ å¸Œæœ›å›¾ç‰‡ä¹Ÿæ˜¯é€šæ (å…¨å®½)çš„ï¼ŒæŠŠ width æ”¹æˆ 100% + margin è´Ÿå€¼ã€‚
       ä½†é€šå¸¸å¡ç‰‡ç¼©è¿›ä¸€ç‚¹æ›´å¥½çœ‹ï¼Œä¿æŒç°çŠ¶å³å¯ã€‚ */
    body .notion-gallery-grid a>div:first-child {
        width: 100% !important;
        height: 180px !important;
        margin-left: 0 !important;
        margin-bottom: 16px !important;
    }

    /* 5. å­—ä½“é€‚é… */
    body .notion-gallery-grid .notion-property-title {
        font-size: 1rem !important;
    }

    /* 6. é¢åŒ…å±‘å­—æ•°é™åˆ¶ */
    .breadcrumbs-limit .breadcrumb {
        max-width: 160px !important;
    }
}

/* =========================================================
   ğŸ› ä¿®å¤ï¼šPage å›¾æ ‡è¢«å°é¢å›¾é®æŒ¡é—®é¢˜
   ========================================================= */

/* é€‰ä¸­æ‰€æœ‰ç±»å‹çš„é¡µé¢é¡¶éƒ¨å¤§å›¾æ ‡ (Emoji æˆ– å›¾ç‰‡) */
.notion-page-icon-hero,
.notion-page-icon-image,
.notion-page-icon-span {
    z-index: 5 !important;
    /* âš¡ï¸ æ ¸å¿ƒï¼šå¿…é¡»æ¯”å°é¢çš„ 1 å¤§ */
    position: relative !important;
    /* ç¡®ä¿ z-index ç”Ÿæ•ˆ */
    opacity: 1 !important;
}
